# [222. 完全二叉树的节点个数](https://leetcode-cn.com/problems/count-complete-tree-nodes/)

## 题目

给出一个完全二叉树，求出该树的节点个数。

说明：

完全二叉树的定义如下：在完全二叉树中，除了最底层节点可能没填满外，其余每层节点数都达到最大值，并且最下面一层的节点都集中在该层最左边的若干位置。若最底层为第 h 层，则该层包含 1~ 2h 个节点。

示例:

```c
输入:
    1
   / \
  2   3
 / \  /
4  5 6

输出: 6
```

## 解题思路

### 全部遍历

递归遍历所有节点

### 满子树直接算

先计算左右子树的深度，就可以得知那个子树是满子树，满子树的长度直接计算 `1<<depth` ，另一个继续

### 二分查找最后一层

满子树，只有最有一层不满，只需要找到第一个为 nil 的节点即可

```go
// 把所有节点都从 1 开始标上下标
// 则最后一排的下标为：[1 << (depth - 1), ... , 1 << depth - 1] ，也就是 [1 << (depth - 1), ... , 1 << depth)
// 比如， depth = 3 ，最后一层可能的数据为 [4, 5, 6, 7]
//     1
//    / \
//   2   3
//  / \  /
// 4  5 6
// 把下标看成二进制，可以根据节点号计算其位置， 0 往左边移动， 1 往右边移动，
// 比如 5(101)，除去最高位，得到 01 ，先左移动一下，再右移动一下就到 5 了
// 最后再判断叶子节点是否为 nil
```
