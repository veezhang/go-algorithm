# [164. 最大间距](https://leetcode-cn.com/problems/maximum-gap/)

## 题目

给定一个无序的数组，找出数组在排序之后，相邻元素之间最大的差值。

如果数组元素个数小于 2，则返回 0。

示例 1:

```c
输入: [3,6,9,1]
输出: 3
解释: 排序后的数组是 [1,3,6,9], 其中相邻元素 (3,6) 和 (6,9) 之间都存在最大差值 3。
```

示例 2:

```c
输入: [10]
输出: 0
解释: 数组元素个数小于 2，因此返回 0。
```

说明:

* 你可以假设数组中所有元素都是非负整数，且数值在 32 位有符号整数范围内。
* 请尝试在线性时间复杂度和空间复杂度的条件下解决此问题。

## 解题思路

### 普通二进制

不需要知道数据重复问题，那么可以二进制表示数据是否存在

然后从小到大依次查找间隙

这个方法时间复杂度，跟元数据中最小数据，最大数据有关

如果是跨度很大的数据（稀疏数据），则会比较耗时

达不到 O(N) 的要求

### RoaringBitmap

[RoaringBitmap](https://github.com/RoaringBitmap/RoaringBitmap)

BitMap 的一个压缩算法：

包含 3 中

将 32 位无符号整数按照高 16 位分桶，即最多可能有 2^16=65536 个桶，论文内称为 Container。

存储数据时，按照数据的高 16 位找到 Container（找不到就会新建一个），再将低 16 位放入 Container 中。也就是说，一个 RoaringBitmap 就是很多 Container 的集合。

一共有 3 中 Container ：

* ArrayContainer    ： 元素个数小于 4096
* BitmapContainer   ： 元素个数超过 4096
* RunContainer      ： 用这个来统计，比前面占用内存小的时候

有些情况下，也无法满足 O(N)

### 分桶计算最大值，最小值

分多个桶，取桶内部最小值和最大值，然后桶间计算间隙

需要保证最大间隙一定在桶间，而不是桶内部
